<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Numacal</title>
  <link rel="icon" href="https://img.icons8.com/ios-filled/50/ffffff/numerology.png"/>
  <style>
    :root{
      --bg:#e5e7eb;
      --card:#f0f2f5;
      --text:#000;
      --shadow-light:rgba(255,255,255,0.8);
      --shadow-dark:rgba(0,0,0,0.15);
    }
    .dark{
      --bg:#1c1e2a;
      --card:#2a2c39;
      --text:#fff;
      --shadow-light:rgba(0,0,0,0.5);
      --shadow-dark:rgba(0,0,0,0.9);
    }
    *{box-sizing:border-box;font-family:'Segoe UI',sans-serif;}
    body{
      background:var(--bg);
      color:var(--text);
      display:flex;
      align-items:center;
      justify-content:center;
      min-height:100vh;
      padding:1.5rem;
    }
    .wrapper{
      max-width:480px;
      width:100%;
      background:var(--card);
      border-radius:25px;
      padding:2rem;
      text-align:center;
      box-shadow:12px 12px 20px var(--shadow-dark),-12px -12px 20px var(--shadow-light);
    }
    h1{margin-bottom:1.5rem;}
    select, input{
      width:100%;
      padding:0.8rem;
      margin:0.6rem 0;
      border:none;
      border-radius:15px;
      background:var(--card);
      color:var(--text);
      box-shadow: inset 6px 6px 12px var(--shadow-dark), inset -6px -6px 12px var(--shadow-light);
    }
    button{
      width:100%;
      padding:0.8rem;
      margin:0.45rem 0;
      border:none;
      border-radius:15px;
      background:var(--card);
      color:var(--text);
      font-weight:600;
      cursor:pointer;
      box-shadow:6px 6px 12px var(--shadow-dark),-6px -6px 12px var(--shadow-light);
      transition:0.2s;
    }
    button:hover{
      box-shadow:4px 4px 8px var(--shadow-dark),-4px -4px 8px var(--shadow-light);
    }
    #result, #historySection{margin-top:1rem;}
    ul{list-style:none;padding:0;margin-top:0.4rem;}
    li{margin:0.35rem 0;}
    footer{margin-top:1.6rem;font-size:0.85rem;opacity:0.7;}
  </style>
</head>
<body>
  <div class="wrapper">
    <h1>ðŸ”¢ Numacal</h1>

    <!-- Numerology System Dropdown -->
    <select id="numerologySystem">
      <option value="chaldean">Chaldean</option>
      <option value="pythagorean">Pythagorean</option>
      <option value="vedic">Vedic</option>
      <option value="kabbalah">Kabbalah</option>
    </select>

    <input type="text" id="question" placeholder="Enter your question"/>

    <button onclick="calculate()">Calculate</button>
    <button onclick="copyResult()">Copy Result</button>
    <button onclick="clearAll()">Clear</button>
    <button onclick="toggleDarkMode()">Toggle Dark Mode</button>

    <div id="result"></div>

    <div id="historySection">
      <h3>History</h3>
      <ul id="historyList"></ul>
    </div>

    <footer>Â© Manik Roy 2025</footer>
  </div>

  <script>
    // Accurate letter-to-number mappings for all systems
    const systems = {
      chaldean:{
        A:1,B:2,C:3,D:4,E:5,F:8,G:3,H:5,I:1,J:1,K:2,L:3,M:4,N:5,O:7,P:8,Q:1,R:2,S:3,T:4,U:6,V:6,W:6,X:5,Y:1,Z:7
      },
      pythagorean:{
        A:1,B:2,C:3,D:4,E:5,F:6,G:7,H:8,I:9,J:1,K:2,L:3,M:4,N:5,O:6,P:7,Q:8,R:9,S:1,T:2,U:3,V:4,W:5,X:6,Y:7,Z:8
      },
      vedic:{ 
        A:1,B:2,C:3,D:4,E:5,F:8,G:3,H:5,I:1,J:1,K:2,L:3,M:4,N:5,O:7,P:8,Q:1,R:2,S:3,T:4,U:6,V:6,W:6,X:5,Y:1,Z:7
      },
      kabbalah:{
        A:1,B:2,C:3,D:4,E:5,F:6,G:7,H:8,I:9,J:10,K:11,L:12,M:13,N:14,O:15,P:16,Q:17,R:18,S:19,T:20,U:21,V:22,W:23,X:24,Y:25,Z:26
      }
    };

    let lastResultText="";

    function reduceToSingleDigit(n){
      while(n>9){n=n.toString().split('').reduce((a,b)=>a+parseInt(b),0);}
      return n;
    }

    function calculate(){
      const text=document.getElementById('question').value.trim().toUpperCase();
      if(!text){document.getElementById('result').innerHTML='<p>Please enter a question.</p>';return;}

      const system=document.getElementById('numerologySystem').value;
      const mapping=systems[system];

      const clean=text.replace(/[^A-Z]/g,'');
      let total=0;
      [...clean].forEach(ch=>{
        total+=mapping[ch]||0;
      });

      const exp=reduceToSingleDigit(total);
      const res=(exp%2===0)?"YES":"NO";

      lastResultText = `${system.charAt(0).toUpperCase()+system.slice(1)}: ${exp} â†’ ${res}`;
      document.getElementById('result').innerHTML=`<p>${system.charAt(0).toUpperCase()+system.slice(1)}: ${exp} â†’ <strong>${res}</strong></p>`;

      const li=document.createElement('li');
      li.textContent=`Question: ${text} â†’ ${system.charAt(0).toUpperCase()+system.slice(1)}: ${exp} (${res})`;
      document.getElementById('historyList').prepend(li);
    }

    function copyResult(){
      if(!lastResultText){alert('No result to copy.');return;}
      navigator.clipboard.writeText(lastResultText);
      alert('Result copied to clipboard.');
    }

    function clearAll(){
      document.getElementById('question').value='';
      document.getElementById('result').innerHTML='';
      document.getElementById('historyList').innerHTML='';
      lastResultText='';
    }

    function toggleDarkMode(){
      document.body.classList.toggle('dark');
    }
  </script>
</body>
</html>
